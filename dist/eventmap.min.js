/*! eventmap - v1.3.7 - 04-10-2013 */
!function(){!function(a){return udefine.configure(function(b){return this.globals(function(){return udefine.inject.add(a.toLowerCase(),{name:a,root:b})})})}("EventMap")}.call(this),function(){"use strict";var a,b,c,d=[].slice;!function(){return null!=Array.isArray?Array.isArray:Array.isArray=function(a){return a.push===Array.prototype.push&&null!=a.length}}(),c={}.hasOwnProperty,a=function(b,d){var e,f;null==b&&(b={});for(e in d)f=d[e],c.call(b,e)||("object"==typeof f?(b[e]={},a(b[e],f)):b[e]=f);return b},b=function(a){return[].concat.call([],a)},udefine("eventmap",["root"],function(e){var f;return f=function(){function f(b){b=a(b,{shorthandFunctions:{enabled:!0,separator:"/"}}),this.events={},this.validEvents=[],this.options=b}return f.prototype.serialize=function(){var a,b;try{b=JSON.stringify(this.events,function(a,b){return"function"==typeof b&&(b=b.toString()),b})}catch(c){a=c,console.error("Error while serializing eventmap: "+a)}return b},f.prototype.deserialize=function(a){var b,c;try{c=JSON.parse(a,function(a,b){return 0===b.indexOf("function")&&(b=new Function(b)()),b})}catch(d){return b=d,console.error("Error while deserializing eventmap: "+b),!1}return this.events=c,!0},f.prototype.bind=function(a,e){var f,g,h,i;if(null==e&&(e=this),this.options.shorthandFunctions.enabled){for(Array.isArray(a)||(a=[a]),f=function(a){return c.call(e,a)?void 0:e[a]=function(){var c;return c=1<=arguments.length?d.call(arguments,0):[],this.trigger.apply(this,b(a,c))}},h=0,i=a.length;i>h;h++)g=a[h],f(g);return this}},f.prototype.on=function(a,b){var c,d;if(b&&!(this.validEvents.length>0&&-1===this.validEvents.indexOf(a)))return(c=this.events)[a]||(c[a]={id:-1,type:""}),(d=this.events[a]).now||(d.now=[]),this.events[a].now.push(b),this.bind(a),this},f.prototype.off=function(a){var b,c,d;if(a&&this.events[a])return d=this.events[a],b=d.id,c=d.type,("once"===c||"repeat"===c)&&("repeat"===c&&e.clearInterval(b),"once"===c&&e.clearTimeout(b)),this.events[a]&&delete this.events[a],this},f.prototype.before=function(a,b){var c,d;if(b)return(c=this.events)[a]||(c[a]={}),(d=this.events[a]).before||(d.before=[]),this.events[a].before.push(b),this},f.prototype.after=function(a,b){var c,d;if(b)return(c=this.events)[a]||(c[a]={}),(d=this.events[a]).after||(d.after=[]),this.events[a].after.push(b),this},f.prototype.clear=function(){return this.events={},this.validEvents=[],this},f.prototype.trigger=function(){var a,c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this;if(i=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],null!=i){if(Array.isArray(i))for(q=0,r=i.length;r>q;q++)g=i[q],this.trigger(g,a);if("object"==typeof i?(k=i.name,j=i.interval,l=i.repeat,c=i.context,f=i.delay,m=i.sender):k=i,null!=(null!=(s=this.events[k])?s.now:void 0))return null==j&&(j=0),null==l&&(l=!1),null==c&&(c={}),null==f&&(f=0),p=function(){var d,e,f,h,i;return e=m?b([[m],a]):a,i=t.events[k].now||[],f=t.events[k].before||[],d=t.events[k].after||[],h=function(a){var b,d;if(null!=a)for(b=0,d=a.length;d>b;b++)g=a[b],g.apply(c,e);return null},h(f),h(i),h(d)},h=this.events[k],o=function(){return j?l?(h.type="repeat",h.id=e.setInterval(function(){return p.call(this)},j)):(h.type="once",h.id=e.setTimeout(function(){return p.call(this)},j)):(h.type="direct",p.call(this)),null},f?n=e.setTimeout(function(){return o.call(this),e.clearTimeout(n)},f):o.call(this),this}},f}()}),udefine.env.commonjs&&udefine.require("eventmap",function(a){return module.exports=a})}.call(this);